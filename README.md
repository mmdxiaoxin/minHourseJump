# 跳马

本文档介绍了如何在 Visual Studio 2022 中使用 OpenCV 库和 `<nlohmann/json.hpp>` 库运行给定的 C++ 代码。代码的功能是解决一个棋盘上的跳马问题，根据起始位置和目标位置找到最优路径或可行路径，并提供了一些额外的功能，如打印路径、显示路径图像和将路径转换为 JSON 格式。

## 环境配置

要在 Visual Studio 2022 中配置环境以运行该代码，需要按照以下步骤进行操作：

1. 安装 Visual Studio 2022：前往 Visual Studio 官方网站，下载并安装适用于您的操作系统的 Visual Studio 2022 版本。

2. 配置 C++ 项目：创建一个新的空白 C++ 项目，或者打开现有的 C++ 项目。

3. 导入 OpenCV 库：按照 OpenCV 官方网站上的指南，下载并配置 OpenCV 库。确保将库的包含目录添加到项目的附加包含目录中，并将库的链接器目录添加到项目的附加库目录中。在链接器输入中，添加以下库文件：

   - opencv_coreXXX.lib
   - opencv_highguiXXX.lib
   - opencv_imgcodecsXXX.lib

   将 "XXX" 替换为您下载的 OpenCV 版本的后缀。

4. 导入 `<nlohmann/json.hpp>` 库：在项目中添加 `<nlohmann/json.hpp>` 文件。可以将其添加到项目的源文件目录中，或者在项目中创建一个单独的文件夹，并将文件添加到该文件夹中（注：项目文件include中已包含）。

5. 将提供的代码文件添加到项目中：将给定的 `main.cpp`、`Chessboard.h` 和 `Chessboard.cpp` 文件添加到项目的源文件目录中。

完成上述步骤后，您的环境就已经配置好了，可以编译和运行代码。

## 代码使用

在主函数中，给定了一个 `Chessboard` 对象，并调用了 `solve` 函数来执行代码的主要逻辑。

```c++
int main(int argc, char* argv[]) {
	Chessboard chessboard(32);
	chessboard.solve();

	return 0;
}
```

运行 `solve` 函数将执行以下操作：

1. 从 `input.txt` 文件中读取起始位置和目标位置的坐标。
2. 调用 `optimalPathBFS` 函数使用广度优先搜索算法寻找最优路径。
3. 调用 `branchBoundPath` 函数使用分支限界法寻找最优路径。
4. 调用 `feasiblePathDFS` 函数使用深度优先搜索算法寻找可行路径。
5. 打印最优路径和可行路径的详细信息，并将路径保存到 `output.txt` 文件中。
6. 打印最优路径的 JSON 格式，并将其保存到 `output.json` 文件中。
7. 在图像窗口中显示最优路径。

您可以根据需要调整代码以满足特定的要求。

## 输入文件格式

在 `input.txt` 文件中，输入起始位置和目标位置的坐标。坐标值应为整数，均为 1 到 N 之间的值，其中 N 是棋盘的大小。

例如，以下是一个有效的 `input.txt` 文件的示例：

```
1 1 8 8
```

这表示起始位置的坐标为 (1, 1)，目标位置的坐标为 (8, 8)。

## 输出文件

代码将生成两个输出文件：`output.txt` 和 `output.json`。

`output.txt` 文件包含有关最优路径和可行路径的详细信息。例如：

```
Minimum Jumps: 6
Path: (1, 1) -> (2, 3) -> (3, 5) -> (5, 6) -> (7, 7) -> (8, 5) -> (8, 8)
```

`output.json` 文件包含最优路径的 JSON 格式。例如：

```
jsonCopy code{
  "minJumps": 6,
  "start": { "x": 1, "y": 1 },
  "target": { "x": 8, "y": 8 },
  "path": [
    { "x": 1, "y": 1 },
    { "x": 2, "y": 3 },
    { "x": 3, "y": 5 },
    { "x": 5, "y": 6 },
    { "x": 7, "y": 7 },
    { "x": 8, "y": 5 },
    { "x": 8, "y": 8 }
  ],
  "boardSize": 32
}
```

## 注意事项

- 本代码使用了 C++11 的一些特性，请确保在项目配置中启用了 C++11 标准。
- 如果出现任何编译错误或链接错误，请检查您的环境配置和项目设置，并确保正确导入了所需的库和头文件。
- 请确保提供的输入文件（`input.txt`）在运行代码之前存在，并且具有正确的格式。
- 在使用图像显示功能时，请确保已正确配置了 OpenCV 库，并且在运行代码时可以访问所需的图像显示资源。

希望这份文档能帮助您理解和使用代码。如果您有任何问题或需要进一步的帮助，请随时提问。